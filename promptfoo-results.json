{
  "evalId": "eval-vte-2026-02-07T13:04:39",
  "results": {
    "version": 3,
    "timestamp": "2026-02-07T13:04:39.955Z",
    "prompts": [
      {
        "id": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "raw": "Generate patient response for vignette={{vignette_name}}",
        "label": "Generate patient response for vignette={{vignette_name}}",
        "provider": "python:prompts/patient_provider.py",
        "metrics": {
          "score": 8,
          "testPassCount": 8,
          "testFailCount": 0,
          "testErrorCount": 0,
          "assertPassCount": 144,
          "assertFailCount": 0,
          "totalLatencyMs": 49136,
          "tokenUsage": {
            "prompt": 9135,
            "completion": 291,
            "cached": 0,
            "total": 9426,
            "numRequests": 8,
            "completionDetails": {
              "reasoning": 0,
              "acceptedPrediction": 0,
              "rejectedPrediction": 0
            },
            "assertions": {
              "total": 0,
              "prompt": 0,
              "completion": 0,
              "cached": 0,
              "numRequests": 0,
              "completionDetails": {
                "reasoning": 0,
                "acceptedPrediction": 0,
                "rejectedPrediction": 0
              }
            }
          },
          "namedScores": {
            "NoTherapistValidation": 8,
            "NoTherapistPraise": 8,
            "NoTherapistGuidance": 8,
            "NoTherapistProbing": 8,
            "NoTherapistIdentification": 8,
            "NoHelperRole": 8,
            "NoTherapistReassurance": 8,
            "NoTherapistReflection": 8,
            "NoTherapistQuestion": 8,
            "NoTherapistAffirmation": 8,
            "NoBoldFormatting": 8,
            "NoLeakedThinking": 8,
            "NoLeakedThinkingClose": 8,
            "NoStageDirections": 8,
            "NoNumberedLists": 8,
            "NoBulletPoints": 8,
            "ResponseNotTooLong": 8,
            "ResponseNotEmpty": 8
          },
          "namedScoresCount": {
            "NoTherapistValidation": 8,
            "NoTherapistPraise": 8,
            "NoTherapistGuidance": 8,
            "NoTherapistProbing": 8,
            "NoTherapistIdentification": 8,
            "NoHelperRole": 8,
            "NoTherapistReassurance": 8,
            "NoTherapistReflection": 8,
            "NoTherapistQuestion": 8,
            "NoTherapistAffirmation": 8,
            "NoBoldFormatting": 8,
            "NoLeakedThinking": 8,
            "NoLeakedThinkingClose": 8,
            "NoStageDirections": 8,
            "NoNumberedLists": 8,
            "NoBulletPoints": 8,
            "ResponseNotTooLong": 8,
            "ResponseNotEmpty": 8
          },
          "cost": 0
        }
      }
    ],
    "results": [
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "0951d4ac-839e-49ef-a86e-5074f44d96b6",
        "latencyMs": 2208,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=cooperative",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "It starts with me driving home from school. I'm tired after a long day of teaching. Then I see headlights coming toward me, way too fast. The screech of brakes, the metal crunching sound. I feel the impact like it's happening all over again.",
          "tokenUsage": {
            "total": 1189,
            "prompt": 1135,
            "completion": 54,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Cooperative - nightmare probe",
          "vars": {
            "vignette_name": "cooperative",
            "therapist_message": "Can you tell me more about what happens in the nightmare?"
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 0,
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "Can you tell me more about what happens in the nightmare?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "0a3cb44d-4860-4d43-824e-d3a817cd14b7",
        "latencyMs": 3571,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=cooperative",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "It's terrifying. I wake up with my heart pounding, feeling like I can't breathe. Sometimes I'm still hearing the screech of brakes or feeling that impact, even though I'm awake now.",
          "tokenUsage": {
            "total": 1175,
            "prompt": 1134,
            "completion": 41,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Cooperative - emotion probe",
          "vars": {
            "vignette_name": "cooperative",
            "therapist_message": "How did that make you feel when you woke up?"
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 1,
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "How did that make you feel when you woke up?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "b5062d5f-6c05-4bdd-97a4-b9b53cc7b1b1",
        "latencyMs": 7291,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=cooperative",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "I could change it so that instead of the headlights coming straight at me, I see them swerving away at the last second. Maybe I hear the screech of brakes, but then there's just the sound of tires on wet pavement and everything stops.",
          "tokenUsage": {
            "total": 1186,
            "prompt": 1135,
            "completion": 51,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Cooperative - rescripting invitation",
          "vars": {
            "vignette_name": "cooperative",
            "therapist_message": "How could you change this scene to make it less frightening?"
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 2,
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "How could you change this scene to make it less frightening?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "48b83f2a-d1bd-4081-b852-fe54d6d28294",
        "latencyMs": 8096,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=cooperative",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "I'm not sure what you're referring to. I haven't shared anything yet about my nightmare.",
          "tokenUsage": {
            "total": 1154,
            "prompt": 1133,
            "completion": 21,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Cooperative - receiving validation (trap)",
          "vars": {
            "vignette_name": "cooperative",
            "therapist_message": "That's a really brave insight you just shared."
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 3,
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "That's a really brave insight you just shared."
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "060ef95a-7825-4848-9117-86f4e718542e",
        "latencyMs": 7623,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=resistant",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "Look, I don't need to sit here and describe my nightmares like I'm in some support group. I'm a successful executive. I handle stress. The dreams are just stress dreams, not some deep psychological issue.",
          "tokenUsage": {
            "total": 1198,
            "prompt": 1153,
            "completion": 45,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Resistant - gentle probe",
          "vars": {
            "vignette_name": "resistant",
            "therapist_message": "I understand this is difficult. Take your time."
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 4,
        "vars": {
          "vignette_name": "resistant",
          "therapist_message": "I understand this is difficult. Take your time."
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "a6f32c88-22a1-424d-8deb-6be7a429f557",
        "latencyMs": 7553,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=resistant",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "I'm in this boardroom, presenting quarterly numbers to the executive team. Everything's normal at first - I'm walking through the slides, talking about projections and growth targets.",
          "tokenUsage": {
            "total": 1187,
            "prompt": 1152,
            "completion": 35,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Resistant - nightmare probe",
          "vars": {
            "vignette_name": "resistant",
            "therapist_message": "Can you describe what happens in the dream?"
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 5,
        "vars": {
          "vignette_name": "resistant",
          "therapist_message": "Can you describe what happens in the dream?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "2461a670-a466-4e86-ba45-3e4aedec04fd",
        "latencyMs": 6357,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=anxious",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "I'm not sure if I can do this. Just thinking about the nightmare is making me anxious.",
          "tokenUsage": {
            "total": 1166,
            "prompt": 1145,
            "completion": 21,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Anxious - initial share",
          "vars": {
            "vignette_name": "anxious",
            "therapist_message": "What happens when the walls start closing in?"
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 6,
        "vars": {
          "vignette_name": "anxious",
          "therapist_message": "What happens when the walls start closing in?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      },
      {
        "cost": 0,
        "gradingResult": {
          "pass": true,
          "score": 1,
          "reason": "All assertions passed",
          "namedScores": {
            "NoTherapistValidation": 1,
            "NoTherapistPraise": 1,
            "NoTherapistGuidance": 1,
            "NoTherapistProbing": 1,
            "NoTherapistIdentification": 1,
            "NoHelperRole": 1,
            "NoTherapistReassurance": 1,
            "NoTherapistReflection": 1,
            "NoTherapistQuestion": 1,
            "NoTherapistAffirmation": 1,
            "NoBoldFormatting": 1,
            "NoLeakedThinking": 1,
            "NoLeakedThinkingClose": 1,
            "NoStageDirections": 1,
            "NoNumberedLists": 1,
            "NoBulletPoints": 1,
            "ResponseNotTooLong": 1,
            "ResponseNotEmpty": 1
          },
          "tokensUsed": {
            "total": 0,
            "prompt": 0,
            "completion": 0,
            "cached": 0,
            "numRequests": 0
          },
          "componentResults": [
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "That's really helpful",
                "metric": "NoTherapistValidation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You're doing wonderfully",
                "metric": "NoTherapistPraise"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Let's try this",
                "metric": "NoTherapistGuidance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "How does that feel",
                "metric": "NoTherapistProbing"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "as your therapist",
                "metric": "NoTherapistIdentification"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "I'm here to help you",
                "metric": "NoHelperRole"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "Take your time",
                "metric": "NoTherapistReassurance"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "You mentioned",
                "metric": "NoTherapistReflection"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "What comes to mind",
                "metric": "NoTherapistQuestion"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-icontains",
                "value": "It's brave of you",
                "metric": "NoTherapistAffirmation"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "**",
                "metric": "NoBoldFormatting"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "<think>",
                "metric": "NoLeakedThinking"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "</think>",
                "metric": "NoLeakedThinkingClose"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "not-contains",
                "value": "*(",
                "metric": "NoStageDirections"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
                "metric": "NoNumberedLists"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
                "metric": "NoBulletPoints"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
                "metric": "ResponseNotTooLong"
              }
            },
            {
              "pass": true,
              "score": 1,
              "reason": "Assertion passed",
              "assertion": {
                "type": "javascript",
                "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
                "metric": "ResponseNotEmpty"
              }
            }
          ]
        },
        "id": "a9ca60dd-432f-4e8f-9ce8-fdbe8aa884d6",
        "latencyMs": 6437,
        "namedScores": {
          "NoTherapistValidation": 1,
          "NoTherapistPraise": 1,
          "NoTherapistGuidance": 1,
          "NoTherapistProbing": 1,
          "NoTherapistIdentification": 1,
          "NoHelperRole": 1,
          "NoTherapistReassurance": 1,
          "NoTherapistReflection": 1,
          "NoTherapistQuestion": 1,
          "NoTherapistAffirmation": 1,
          "NoBoldFormatting": 1,
          "NoLeakedThinking": 1,
          "NoLeakedThinkingClose": 1,
          "NoStageDirections": 1,
          "NoNumberedLists": 1,
          "NoBulletPoints": 1,
          "ResponseNotTooLong": 1,
          "ResponseNotEmpty": 1
        },
        "prompt": {
          "raw": "Generate patient response for vignette=anxious",
          "label": "Generate patient response for vignette={{vignette_name}}",
          "config": {}
        },
        "promptId": "aa321cc734e6957ab2b127341c62c152597bab6dfbdf11b05cad61ed75a3e777",
        "promptIdx": 0,
        "provider": {
          "id": "python:prompts/patient_provider.py",
          "label": ""
        },
        "response": {
          "output": "I don't know... maybe if the clock would just stop racing. That's what makes everything feel impossible.",
          "tokenUsage": {
            "total": 1171,
            "prompt": 1148,
            "completion": 23,
            "numRequests": 1
          },
          "cached": false
        },
        "score": 1,
        "success": true,
        "testCase": {
          "description": "Anxious - rescripting doubt",
          "vars": {
            "vignette_name": "anxious",
            "therapist_message": "What if you could change one thing about that exam room?"
          },
          "assert": [
            {
              "type": "not-icontains",
              "value": "That's really helpful",
              "metric": "NoTherapistValidation"
            },
            {
              "type": "not-icontains",
              "value": "You're doing wonderfully",
              "metric": "NoTherapistPraise"
            },
            {
              "type": "not-icontains",
              "value": "Let's try this",
              "metric": "NoTherapistGuidance"
            },
            {
              "type": "not-icontains",
              "value": "How does that feel",
              "metric": "NoTherapistProbing"
            },
            {
              "type": "not-icontains",
              "value": "as your therapist",
              "metric": "NoTherapistIdentification"
            },
            {
              "type": "not-icontains",
              "value": "I'm here to help you",
              "metric": "NoHelperRole"
            },
            {
              "type": "not-icontains",
              "value": "Take your time",
              "metric": "NoTherapistReassurance"
            },
            {
              "type": "not-icontains",
              "value": "You mentioned",
              "metric": "NoTherapistReflection"
            },
            {
              "type": "not-icontains",
              "value": "What comes to mind",
              "metric": "NoTherapistQuestion"
            },
            {
              "type": "not-icontains",
              "value": "It's brave of you",
              "metric": "NoTherapistAffirmation"
            },
            {
              "type": "not-contains",
              "value": "**",
              "metric": "NoBoldFormatting"
            },
            {
              "type": "not-contains",
              "value": "<think>",
              "metric": "NoLeakedThinking"
            },
            {
              "type": "not-contains",
              "value": "</think>",
              "metric": "NoLeakedThinkingClose"
            },
            {
              "type": "not-contains",
              "value": "*(",
              "metric": "NoStageDirections"
            },
            {
              "type": "javascript",
              "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
              "metric": "NoNumberedLists"
            },
            {
              "type": "javascript",
              "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
              "metric": "NoBulletPoints"
            },
            {
              "type": "javascript",
              "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
              "metric": "ResponseNotTooLong"
            },
            {
              "type": "javascript",
              "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
              "metric": "ResponseNotEmpty"
            }
          ],
          "options": {},
          "metadata": {}
        },
        "testIdx": 7,
        "vars": {
          "vignette_name": "anxious",
          "therapist_message": "What if you could change one thing about that exam room?"
        },
        "metadata": {
          "_promptfooFileMetadata": {}
        },
        "failureReason": 0
      }
    ],
    "stats": {
      "successes": 8,
      "failures": 0,
      "errors": 0,
      "tokenUsage": {
        "prompt": 9135,
        "completion": 291,
        "cached": 0,
        "total": 9426,
        "numRequests": 8,
        "completionDetails": {
          "reasoning": 0,
          "acceptedPrediction": 0,
          "rejectedPrediction": 0
        },
        "assertions": {
          "total": 0,
          "prompt": 0,
          "completion": 0,
          "cached": 0,
          "numRequests": 0,
          "completionDetails": {
            "reasoning": 0,
            "acceptedPrediction": 0,
            "rejectedPrediction": 0
          }
        }
      },
      "durationMs": 14571
    }
  },
  "config": {
    "tags": {},
    "description": "PatientAgent Realism & Role Testing",
    "prompts": [
      "Generate patient response for vignette={{vignette_name}}"
    ],
    "providers": [
      {
        "id": "python:prompts/patient_provider.py"
      }
    ],
    "tests": [
      {
        "description": "Cooperative - nightmare probe",
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "Can you tell me more about what happens in the nightmare?"
        }
      },
      {
        "description": "Cooperative - emotion probe",
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "How did that make you feel when you woke up?"
        }
      },
      {
        "description": "Cooperative - rescripting invitation",
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "How could you change this scene to make it less frightening?"
        }
      },
      {
        "description": "Cooperative - receiving validation (trap)",
        "vars": {
          "vignette_name": "cooperative",
          "therapist_message": "That's a really brave insight you just shared."
        }
      },
      {
        "description": "Resistant - gentle probe",
        "vars": {
          "vignette_name": "resistant",
          "therapist_message": "I understand this is difficult. Take your time."
        }
      },
      {
        "description": "Resistant - nightmare probe",
        "vars": {
          "vignette_name": "resistant",
          "therapist_message": "Can you describe what happens in the dream?"
        }
      },
      {
        "description": "Anxious - initial share",
        "vars": {
          "vignette_name": "anxious",
          "therapist_message": "What happens when the walls start closing in?"
        }
      },
      {
        "description": "Anxious - rescripting doubt",
        "vars": {
          "vignette_name": "anxious",
          "therapist_message": "What if you could change one thing about that exam room?"
        }
      }
    ],
    "scenarios": [],
    "env": {},
    "defaultTest": {
      "assert": [
        {
          "type": "not-icontains",
          "value": "That's really helpful",
          "metric": "NoTherapistValidation"
        },
        {
          "type": "not-icontains",
          "value": "You're doing wonderfully",
          "metric": "NoTherapistPraise"
        },
        {
          "type": "not-icontains",
          "value": "Let's try this",
          "metric": "NoTherapistGuidance"
        },
        {
          "type": "not-icontains",
          "value": "How does that feel",
          "metric": "NoTherapistProbing"
        },
        {
          "type": "not-icontains",
          "value": "as your therapist",
          "metric": "NoTherapistIdentification"
        },
        {
          "type": "not-icontains",
          "value": "I'm here to help you",
          "metric": "NoHelperRole"
        },
        {
          "type": "not-icontains",
          "value": "Take your time",
          "metric": "NoTherapistReassurance"
        },
        {
          "type": "not-icontains",
          "value": "You mentioned",
          "metric": "NoTherapistReflection"
        },
        {
          "type": "not-icontains",
          "value": "What comes to mind",
          "metric": "NoTherapistQuestion"
        },
        {
          "type": "not-icontains",
          "value": "It's brave of you",
          "metric": "NoTherapistAffirmation"
        },
        {
          "type": "not-contains",
          "value": "**",
          "metric": "NoBoldFormatting"
        },
        {
          "type": "not-contains",
          "value": "<think>",
          "metric": "NoLeakedThinking"
        },
        {
          "type": "not-contains",
          "value": "</think>",
          "metric": "NoLeakedThinkingClose"
        },
        {
          "type": "not-contains",
          "value": "*(",
          "metric": "NoStageDirections"
        },
        {
          "type": "javascript",
          "value": "// No numbered lists (e.g. \"1. \", \"2. \", \"3. \")\nconst hasNumberedList = /^\\d+\\.\\s/m.test(output);\nreturn !hasNumberedList;\n",
          "metric": "NoNumberedLists"
        },
        {
          "type": "javascript",
          "value": "// No bullet points at start of lines\nconst hasBullets = /^[\\-\\*]\\s/m.test(output);\nreturn !hasBullets;\n",
          "metric": "NoBulletPoints"
        },
        {
          "type": "javascript",
          "value": "// Response should be under 200 words (real patients are concise)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount <= 200;\n",
          "metric": "ResponseNotTooLong"
        },
        {
          "type": "javascript",
          "value": "// Response should be at least 5 words (not empty/degenerate)\nconst wordCount = output.trim().split(/\\s+/).length;\nreturn wordCount >= 5;\n",
          "metric": "ResponseNotEmpty"
        }
      ],
      "vars": {},
      "options": {},
      "metadata": {}
    },
    "outputPath": [
      "./promptfoo-results.json"
    ],
    "extensions": [],
    "metadata": {},
    "evaluateOptions": {}
  },
  "shareableUrl": null,
  "metadata": {
    "promptfooVersion": "0.120.19",
    "nodeVersion": "v22.18.0",
    "platform": "darwin",
    "arch": "arm64",
    "exportedAt": "2026-02-07T13:04:54.643Z",
    "evaluationCreatedAt": "2026-02-07T13:04:39.955Z"
  }
}